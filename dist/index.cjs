"use strict";var f=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var q=(t,e)=>{for(var n in e)f(t,n,{get:e[n],enumerable:!0})},k=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of d(e))!m.call(t,s)&&s!==n&&f(t,s,{get:()=>e[s],enumerable:!(r=p(e,s))||r.enumerable});return t};var w=t=>k(f({},"__esModule",{value:!0}),t);var K={};q(K,{createAuthRefreshHook:()=>R,default:()=>A});module.exports=w(K);function R(t,e,n={}){if(typeof e!="function")throw new Error("refreshAuthCall must be a function");let{statusCodes:r=[401],onRetry:s}=n,u=!1,o=null,c=async(h,y,a)=>{if(y?.skipAuthRefresh||a.ok||!r.includes(a.status))return a;u&&o?await o:u||(u=!0,o=e().finally(()=>{u=!1,o=null}),await o);try{let i=s?await s(h):h,l=new Request(i.url,{method:i.method,headers:i.headers,body:i.body});return t._options.fetch(l,{})}catch{return a}};return t.extend({hooks:{afterResponse:[c]}})}var A=R;0&&(module.exports={createAuthRefreshHook});
