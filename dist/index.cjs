"use strict";var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var m=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},q=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of d(e))!k.call(t,s)&&s!==n&&a(t,s,{get:()=>e[s],enumerable:!(o=p(e,s))||o.enumerable});return t};var w=t=>q(a({},"__esModule",{value:!0}),t);var I={};m(I,{createAuthRefreshHook:()=>l,default:()=>A});module.exports=w(I);function l(t,e,n={}){if(typeof e!="function")throw new Error("refreshAuthCall must be a function");let{statusCodes:o=[401],onRetry:s}=n,u=!1,i=null,R=async(f,h,r)=>{if(h.skipAuthRefresh||r.ok||!o.includes(r.status))return r;u||(u=!0,i=e().finally(()=>{u=!1,i=null})),await i;try{let c=f;s&&(c=await s(f));let y=new Request(c);return t._options.fetch(y,{})}catch{return r}};return t.extend({hooks:{afterResponse:[R]}})}var A=l;0&&(module.exports={createAuthRefreshHook});
