'use strict';Object.defineProperty(exports,'__esModule',{value:true});function y(o,r,i={}){if(typeof r!="function")throw new Error("refreshAuthCall must be a function");let{statusCodes:f=[401],onRetry:u}=i,t=false,e=null,h=async(a,R,s)=>{if(R?.skipAuthRefresh||s.ok||!f.includes(s.status))return s;t&&e?await e:t||(t=true,e=r().finally(()=>{t=false,e=null;}),await e);try{let n=u?await u(a):a,c=new Request(n.url,{method:n.method,headers:n.headers,body:n.body});return o._options.fetch(c,{})}catch{return s}};return o.extend({hooks:{afterResponse:[h]}})}var d=y;exports.createAuthRefreshHook=y;exports.default=d;