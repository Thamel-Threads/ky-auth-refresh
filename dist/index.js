function y(r,n,f={}){if(typeof n!="function")throw new Error("refreshAuthCall must be a function");let{statusCodes:a=[401],onRetry:u}=f,t=false,e=null,h=async(i,R,s)=>{if(R?.skipAuthRefresh||s.ok||!a.includes(s.status))return s;t&&e?await e:t||(t=true,e=n().finally(()=>{t=false,e=null;}),await e);try{let o=u?await u(i):i;return r(o.url,{method:o.method,headers:o.headers,body:o.body,skipAuthRefresh:!0})}catch{return s}};return r.extend({hooks:{afterResponse:[h]}})}var c=y;export{y as createAuthRefreshHook,c as default};