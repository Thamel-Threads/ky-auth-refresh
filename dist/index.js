function h(n,o,a={}){if(typeof o!="function")throw new Error("refreshAuthCall must be a function");let{statusCodes:f=[401],onRetry:r}=a,t=!1,s=null,c=async(u,l,e)=>{if(l.skipAuthRefresh||e.ok||!f.includes(e.status))return e;t||(t=!0,s=o().finally(()=>{t=!1,s=null})),await s;try{let i=u;r&&(i=await r(u));let R=new Request(i);return n._options.fetch(R,{})}catch{return e}};return n.extend({hooks:{afterResponse:[c]}})}var p=h;export{h as createAuthRefreshHook,p as default};
